load("//infra-sk:index.bzl", "nodejs_test", "ts_library")

nodejs_test(
    name = "util_nodejs_test",
    src = "util_nodejs_test.ts",
    deps = [
        ":util_ts_lib",
        "//:node_modules/@types/chai",
        "//:node_modules/@types/express",
        "//:node_modules/chai",
        "//:node_modules/express",
        "//:node_modules/puppeteer",
    ],
)

ts_library(
    name = "util_ts_lib",
    srcs = ["util.ts"],
    data = ["//:puppeteerrc_js_expanded"],
    visibility = ["//visibility:public"],
    deps = [
        ":paths_ts_lib",
        "//:node_modules/puppeteer",
    ],
)

ts_library(
    name = "screencast_ts_lib",
    srcs = ["screencast.ts"],
    visibility = ["//visibility:public"],
    deps = [
        ":paths_ts_lib",
        "//:node_modules/puppeteer",
    ],
)

ts_library(
    name = "paths_ts_lib",
    srcs = ["paths.ts"],
    visibility = ["//visibility:public"],
)
