package spanner

// Generated by //go/sql/exporter/
// DO NOT EDIT

const Schema = `CREATE SEQUENCE IF NOT EXISTS Alerts_seq bit_reversed_positive;
CREATE SEQUENCE IF NOT EXISTS SourceFiles_seq bit_reversed_positive;
CREATE TABLE IF NOT EXISTS Alerts (
  id INT DEFAULT nextval('Alerts_seq'),
  alert TEXT,
  config_state INT DEFAULT 0,
  last_modified INT,
  sub_name TEXT,
  sub_revision TEXT,
  PRIMARY KEY (id)
);
CREATE TABLE IF NOT EXISTS AnomalyGroups (
  id TEXT PRIMARY KEY DEFAULT spanner.generate_uuid(),
  creation_time TIMESTAMPTZ DEFAULT now(),
  anomaly_ids TEXT ARRAY,
  group_meta_data JSONB,
  common_rev_start INT,
  common_rev_end INT,
  action TEXT,
  action_time TIMESTAMPTZ,
  bisection_id TEXT,
  reported_issue_id TEXT,
  culprit_ids TEXT ARRAY,
  last_modified_time TIMESTAMPTZ
);
CREATE TABLE IF NOT EXISTS Commits (
  commit_number INT PRIMARY KEY,
  git_hash TEXT  NOT NULL,
  commit_time INT,
  author TEXT,
  subject TEXT
);
CREATE TABLE IF NOT EXISTS Culprits (
  id TEXT PRIMARY KEY DEFAULT spanner.generate_uuid(),
  host TEXT,
  project TEXT,
  ref TEXT,
  revision TEXT,
  last_modified INT,
  anomaly_group_ids TEXT ARRAY,
  issue_ids TEXT ARRAY,
  group_issue_map JSONB
);
CREATE TABLE IF NOT EXISTS Favorites (
  id TEXT PRIMARY KEY DEFAULT spanner.generate_uuid(),
  user_id TEXT NOT NULL,
  name TEXT,
  url TEXT NOT NULL,
  description TEXT,
  last_modified INT
);
CREATE TABLE IF NOT EXISTS GraphsShortcuts (
  id TEXT  NOT NULL PRIMARY KEY,
  graphs TEXT
);
CREATE TABLE IF NOT EXISTS ParamSets (
  tile_number INT,
  param_key TEXT,
  param_value TEXT,
  PRIMARY KEY (tile_number, param_key, param_value)
);
CREATE TABLE IF NOT EXISTS Postings (
  tile_number INT,
  key_value TEXT NOT NULL,
  trace_id BYTEA,
  PRIMARY KEY (tile_number, key_value, trace_id)
);
CREATE TABLE IF NOT EXISTS Regressions (
  commit_number INT,
  alert_id INT,
  regression TEXT,
  migrated BOOL,
  regression_id TEXT,
  PRIMARY KEY (commit_number, alert_id)
);
CREATE TABLE IF NOT EXISTS Regressions2 (
  id TEXT PRIMARY KEY DEFAULT spanner.generate_uuid(),
  commit_number INT,
  prev_commit_number INT,
  alert_id INT,
  creation_time TIMESTAMPTZ DEFAULT now(),
  median_before REAL,
  median_after REAL,
  is_improvement BOOL,
  cluster_type TEXT,
  cluster_summary JSONB,
  frame JSONB,
  triage_status TEXT,
  triage_message TEXT
);
CREATE TABLE IF NOT EXISTS Shortcuts (
  id TEXT  NOT NULL PRIMARY KEY,
  trace_ids TEXT
);
CREATE TABLE IF NOT EXISTS SourceFiles (
  source_file_id INT DEFAULT nextval('SourceFiles_seq'),
  source_file TEXT  NOT NULL,
  PRIMARY KEY (source_file_id)
);
CREATE TABLE IF NOT EXISTS Subscriptions (
  name TEXT  NOT NULL,
  revision TEXT NOT NULL,
  bug_labels TEXT ARRAY,
  hotlists TEXT ARRAY,
  bug_component TEXT,
  bug_priority INT,
  bug_severity INT,
  bug_cc_emails TEXT ARRAY,
  contact_email TEXT,
  PRIMARY KEY(name, revision)
);
CREATE TABLE IF NOT EXISTS TraceValues (
  trace_id BYTEA,
  commit_number INT,
  val REAL,
  source_file_id INT,
  PRIMARY KEY (trace_id, commit_number)
);
CREATE INDEX IF NOT EXISTS by_revision on Culprits (revision, host, project, ref);
CREATE INDEX IF NOT EXISTS by_user_id on Favorites (user_id);
CREATE INDEX IF NOT EXISTS by_tile_number on ParamSets (tile_number DESC);
CREATE INDEX IF NOT EXISTS by_trace_id on Postings (tile_number, trace_id, key_value);
CREATE INDEX IF NOT EXISTS by_key_value on Postings (tile_number, key_value);
CREATE INDEX IF NOT EXISTS by_alert_id on Regressions2 (alert_id);
CREATE INDEX IF NOT EXISTS by_commit_alert on Regressions2 (commit_number, alert_id);
CREATE INDEX IF NOT EXISTS by_source_file on SourceFiles (source_file, source_file_id);
CREATE INDEX IF NOT EXISTS by_source_file_id on TraceValues (source_file_id, trace_id);
`

var Alerts = []string{
	"id",
	"alert",
	"config_state",
	"last_modified",
	"sub_name",
	"sub_revision",
}

var AnomalyGroups = []string{
	"id",
	"creation_time",
	"anomaly_ids",
	"group_meta_data",
	"common_rev_start",
	"common_rev_end",
	"action",
	"action_time",
	"bisection_id",
	"reported_issue_id",
	"culprit_ids",
	"last_modified_time",
}

var Commits = []string{
	"commit_number",
	"git_hash",
	"commit_time",
	"author",
	"subject",
}

var Culprits = []string{
	"id",
	"host",
	"project",
	"ref",
	"revision",
	"last_modified",
	"anomaly_group_ids",
	"issue_ids",
	"group_issue_map",
	"UNIQUE",
}

var Favorites = []string{
	"id",
	"user_id",
	"name",
	"url",
	"description",
	"last_modified",
}

var GraphsShortcuts = []string{
	"id",
	"graphs",
}

var ParamSets = []string{
	"tile_number",
	"param_key",
	"param_value",
}

var Postings = []string{
	"tile_number",
	"key_value",
	"trace_id",
}

var Regressions = []string{
	"commit_number",
	"alert_id",
	"regression",
	"migrated",
	"regression_id",
}

var Regressions2 = []string{
	"id",
	"commit_number",
	"prev_commit_number",
	"alert_id",
	"creation_time",
	"median_before",
	"median_after",
	"is_improvement",
	"cluster_type",
	"cluster_summary",
	"frame",
	"triage_status",
	"triage_message",
}

var Shortcuts = []string{
	"id",
	"trace_ids",
}

var SourceFiles = []string{
	"source_file_id",
	"source_file",
}

var Subscriptions = []string{
	"name",
	"revision",
	"bug_labels",
	"hotlists",
	"bug_component",
	"bug_priority",
	"bug_severity",
	"bug_cc_emails",
	"contact_email",
}

var TraceValues = []string{
	"trace_id",
	"commit_number",
	"val",
	"source_file_id",
}
